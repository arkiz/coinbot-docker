<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f8f9fa; }
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        .header { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .header h1 { color: #333; margin-bottom: 10px; }
        .user-info { color: #666; margin-bottom: 15px; }
        .logout-btn { background: #dc3545; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; float: right; }
        .logout-btn:hover { background: #c82333; }
        .card { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .alert { padding: 12px; border-radius: 4px; margin-bottom: 20px; }
        .alert.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .alert.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        
        /* í¼ ìŠ¤íƒ€ì¼ */
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 500; color: #333; }
        .form-group input[type="number"] { 
            width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; 
            font-size: 14px; transition: border-color 0.3s;
        }
        .form-group input[type="number"]:focus { 
            outline: none; border-color: #007bff; box-shadow: 0 0 0 2px rgba(0,123,255,0.25); 
        }
        .form-group small { color: #666; font-size: 12px; margin-top: 4px; display: block; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        
        /* ë¼ë””ì˜¤ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .radio-group { display: flex; gap: 20px; align-items: center; }
        .radio-item { display: flex; align-items: center; gap: 8px; }
        .radio-item input[type="radio"] { margin: 0; }
        .radio-item label { margin: 0; font-weight: normal; cursor: pointer; }
        
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn { background: #007bff; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; }
        .btn:hover { background: #0056b3; }
        .btn-large { padding: 15px 30px; font-size: 16px; width: 100%; }
        .btn-secondary { background: #6c757d; }
        .btn-secondary:hover { background: #545b62; }
        
        /* ë’¤ë¡œê°€ê¸° ë§í¬ */
        .back-link { display: inline-block; margin-top: 20px; color: #007bff; text-decoration: none; }
        .back-link:hover { text-decoration: underline; }
        
        /* ë„ì›€ë§ ì¹´ë“œ */
        .help-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .help-card h3 { color: white; margin-bottom: 10px; }
        
        @media (max-width: 768px) {
            .form-row { grid-template-columns: 1fr; }
            .radio-group { flex-direction: column; align-items: flex-start; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="logout-btn" onclick="document.getElementById('logout-form').submit()">ë¡œê·¸ì•„ì›ƒ</button>
            <form id="logout-form" action="/auth/logout" method="POST" style="display: none;"></form>
            
            <h1><%= title %></h1>
            <div class="user-info">ê°œì¸ ê¹€í”„ ë´‡ ì„¤ì •ì„ ê´€ë¦¬í•˜ì„¸ìš”</div>
            <a href="/dashboard" class="back-link">â† ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°</a>
        </div>

        <% if (success && success.length > 0) { %>
            <div class="alert success"><%= success[0] %></div>
        <% } %>
        <% if (error && error.length > 0) { %>
            <div class="alert error"><%= error[0] %></div>
        <% } %>

        <div class="card">
            <h2>ğŸ¤– ë´‡ ì„¤ì •</h2>
            
            <% if (!botSettings.hasSettings) { %>
                <div style="background: #e3f2fd; padding: 15px; border-radius: 6px; margin-bottom: 20px;">
                    <h4 style="color: #1976d2; margin-bottom: 10px;">âœ¨ ì²« ì„¤ì •ì„ ì‹œì‘í•©ë‹ˆë‹¤!</h4>
                    <p style="color: #1565c0; margin: 0;">ì•„ë˜ ê°’ë“¤ì„ í™•ì¸í•˜ê³  í•„ìš”ì— ë”°ë¼ ì¡°ì •í•œ í›„ ì €ì¥í•´ì£¼ì„¸ìš”. ê¶Œì¥ê°’ì´ ë¯¸ë¦¬ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
                </div>
            <% } %>
            
            <form action="/dashboard/settings" method="POST">
                <div class="form-row">
                    <div class="form-group">
                        <label for="search_interval_seconds">ê²€ìƒ‰ ì£¼ê¸° (ì´ˆ)</label>
                        <input type="number" id="search_interval_seconds" name="search_interval_seconds" 
                            value="<%= botSettings.search_interval_seconds || botSettings.defaults.search_interval_seconds %>" 
                            min="30" max="300" step="10" required>
                        <small>ì½”ì¸ ê°€ê²©ì„ ê²€ìƒ‰í•˜ëŠ” ì£¼ê¸° (30ì´ˆ ~ 300ì´ˆ, ê¶Œì¥: 60ì´ˆ)</small>
                    </div>
                    <div class="form-group">
                        <label for="premium_threshold_percent">í”„ë¦¬ë¯¸ì—„ ì„ê³„ê°’ (%)</label>
                        <input type="number" id="premium_threshold_percent" name="premium_threshold_percent" 
                            value="<%= botSettings.premium_threshold_percent || botSettings.defaults.premium_threshold_percent %>" 
                            step="0.1" min="0.1" max="5.0" required>
                        <small>ì´ ê°’ ì´ìƒìœ¼ë¡œ ê¹€í”„ê°€ ë²Œì–´ì ¸ì•¼ ë§¤ë§¤ê°•ë„ ì¦ê°€ (0.1% ~ 5.0%, ê¶Œì¥: 1.0%)</small>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="trading_intensity_threshold">ë§¤ìˆ˜ ì¡°ê±´ ì„ê³„ê°’</label>
                        <input type="number" id="trading_intensity_threshold" name="trading_intensity_threshold" 
                            value="<%= botSettings.trading_intensity_threshold || botSettings.defaults.trading_intensity_threshold %>" 
                            min="1" max="10" required>
                        <small>ë§¤ë§¤ê°•ë„ê°€ ì´ ê°’ì— ë„ë‹¬í•˜ë©´ ê±°ë˜ ì‹œë„ (1 ~ 10, ê¶Œì¥: 5)</small>
                    </div>
                    <div class="form-group">
                        <label for="min_trade_amount_krw">ìµœì†Œ ê±°ë˜ ê¸ˆì•¡ (ì›)</label>
                        <input type="number" id="min_trade_amount_krw" name="min_trade_amount_krw" 
                            value="<%= botSettings.min_trade_amount_krw || botSettings.defaults.min_trade_amount_krw %>" 
                            min="100000" step="100000" required>
                        <small>1íšŒ ê±°ë˜ ì‹œ ìµœì†Œ ë§¤ìˆ˜ ê¸ˆì•¡ (ìµœì†Œ 10ë§Œì›)</small>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="max_trade_amount_krw">ìµœëŒ€ ê±°ë˜ ê¸ˆì•¡ (ì›)</label>
                    <input type="number" id="max_trade_amount_krw" name="max_trade_amount_krw" 
                        value="<%= botSettings.max_trade_amount_krw || botSettings.defaults.max_trade_amount_krw %>" 
                        min="1000000" step="1000000" required>
                    <small>1íšŒ ê±°ë˜ ì‹œ ìµœëŒ€ ë§¤ìˆ˜ ê¸ˆì•¡ (ìµœì†Œ 100ë§Œì›)</small>
                </div>

                <div class="form-group">
                    <label>ë´‡ í™œì„±í™” ìƒíƒœ</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="bot_enabled_true" name="bot_enabled" value="true" 
                                <%= (botSettings.bot_enabled === true) ? 'checked' : '' %>>
                            <label for="bot_enabled_true">í™œì„±í™”</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="bot_enabled_false" name="bot_enabled" value="false" 
                                <%= (botSettings.bot_enabled === false || botSettings.bot_enabled === null) ? 'checked' : '' %>>
                            <label for="bot_enabled_false">ë¹„í™œì„±í™”</label>
                        </div>
                    </div>
                    <small>ê°œì¸ ë´‡ì˜ ì‘ë™ ì—¬ë¶€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤</small>
                </div>

                <button type="submit" class="btn btn-large">
                    <%= botSettings.hasSettings ? 'ğŸ’¾ ì„¤ì • ì—…ë°ì´íŠ¸' : 'ğŸš€ ì„¤ì • ì™„ë£Œí•˜ê¸°' %>
                </button>
            </form>
        </div>

        <div class="card help-card">
            <h3>ğŸ’¡ ì„¤ì • ê°€ì´ë“œ</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <div>
                    <h4>ê²€ìƒ‰ ì£¼ê¸°</h4>
                    <p>ë„ˆë¬´ ì§§ìœ¼ë©´ API ì œí•œì— ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 60ì´ˆë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.</p>
                </div>
                <div>
                    <h4>í”„ë¦¬ë¯¸ì—„ ì„ê³„ê°’</h4>
                    <p>ì‹œì¥ ìƒí™©ì— ë”°ë¼ 0.5% ~ 2.0% ì‚¬ì´ì—ì„œ ì¡°ì •í•˜ì„¸ìš”.</p>
                </div>
                <div>
                    <h4>ë§¤ìˆ˜ ì¡°ê±´</h4>
                    <p>ê°’ì´ í´ìˆ˜ë¡ ì‹ ì¤‘í•˜ê²Œ ê±°ë˜í•˜ì§€ë§Œ ê¸°íšŒë¥¼ ë†“ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>
                <div>
                    <h4>ê±°ë˜ ê¸ˆì•¡</h4>
                    <p>ì†¡ê¸ˆ ìˆ˜ìˆ˜ë£Œë¥¼ ê³ ë ¤í•˜ì—¬ ìµœì†Œ ê¸ˆì•¡ì„ ì„¤ì •í•˜ì„¸ìš”.</p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
